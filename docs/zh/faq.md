# 常见问题

## 通用问题

### 什么是 IDD？

**Intent 驱动开发（IDD）** 是一种以 Intent 文档作为唯一真相来源的开发方法论。不是代码驱动文档，而是 Intent 驱动代码。

```
传统模式: Code → Documentation
IDD:      Intent → Tests → Code → Sync
```

### IDD 与 TDD 有什么区别？

| 方面 | TDD | IDD |
|------|-----|-----|
| 真相来源 | 测试 | Intent 文档 |
| 起点 | 写测试 | 写 Intent |
| 人工审查 | 代码审查 | Intent 审查 |
| AI 角色 | 辅助 | 实现 |
| 文档 | 事后补充 | 内建（Intent） |

IDD 将 TDD 作为其工作流程的一部分——在代码之前仍然先写测试，但测试是从 Intent 派生的。

### IDD 与 SDD（规格驱动开发）有什么区别？

| 方面 | SDD | IDD |
|------|-----|-----|
| 组织方式 | 按需求类型 | 按模块/层 |
| 核心产物 | 文本描述 | 结构图 |
| 粒度 | 拆分为用户故事 | 保持完整模式 |
| 任务管理 | 单独的任务文件 | 无 - AI 自主分解 |
| LLM 友好度 | 需要上下文组装 | 一次理解完整模式 |

### 使用 IDD 必须要 AI 吗？

IDD 是为 AI 辅助开发设计的，但也可以不用 AI。Intent 文档本身仍然有价值：
- 清晰的规格
- 团队沟通
- 入职文档

然而，IDD 的完整能力来自让 AI Agent 处理实现，而人类专注于 Intent。

---

## 入门

### 如何开始使用 IDD？

```bash
# 1. 安装插件
npx add-skill arcblock/idd

# 2. 评估适配性
/intent-assess

# 3. 初始化结构
/intent-init

# 4. 创建第一个 Intent
/intent-interview

# 5. 开始构建
/intent-build-now
```

### 可以逐步采用 IDD 吗？

可以！推荐的方法：

1. **从小处开始** - 选择一个新功能
2. **不要改造所有东西** - 现有代码可以保持原样
3. **建立信心** - 看到工作流程运作
4. **扩展** - 应用到更多功能

### 如果团队不想改变怎么办？

从自己开始：
- 为自己的功能写 Intent
- 通过结果展示好处
- 分享你的 Intent 文档供审查
- 让质量说话

---

## Intent 文档

### Intent 文档必须包含什么？

最低要求：

```markdown
# [名称] Intent

> 一句话描述

## 职责

### 做什么
- ...

### 不做什么
- ...

## 结构

\```
[ASCII 图]
\```

## API

### 函数名(参数)
...
```

### 为什么用 ASCII 图而不是图片？

1. **版本控制** - 差异有意义
2. **AI 可读** - LLM 更好理解文本
3. **可移植** - 不需要外部文件
4. **可编辑** - 任何人都可以内联修改

### Intent 应该有多详细？

足够让：
- AI 理解要构建什么
- 测试可以从中派生
- 另一个开发者可以实现它

太少："做一个支付系统"
太多：逐行伪代码
刚好：清晰的 API 契约、示例、边界

### 实现后应该更新 Intent 吗？

是的！使用 `/intent-sync` 来：
- 捕获最终 API 签名
- 记录实现决策
- 保持 Intent 作为准确的真相来源

---

## TDD Agent

### 什么是 TDD Agent？

四个专门的 Agent，从 Intent 实现代码：

| Agent | 角色 |
|-------|------|
| `idd-task-execution-master` | 将 Intent 分解为阶段 |
| `idd-test-master` | 在代码之前设计测试 |
| `idd-code-guru` | 实现以通过测试 |
| `idd-e2e-test-queen` | 端到端验证 |

### 可以跳过 Agent 吗？

不推荐。链条一起工作：
- 跳过 test-master → 没有测试的代码
- 跳过 code-guru → 谁来实现？
- 跳过 e2e-queen → 没有集成验证

### 如果 Agent 犯错怎么办？

Agent 不是完美的。你可以：
1. 审查它们的输出
2. 提供更正
3. 用澄清重新运行

Intent 是你的契约——如果 Agent 偏离，Intent 帮助你发现。

### 可以只用部分 Agent 吗？

可以。常见模式：

- **只用测试优先**：用 test-master，自己实现
- **只用 E2E**：用 e2e-queen 验证
- **完全自动化**：让所有 Agent 工作

---

## 工作流程

### /intent-plan 和 /intent-build-now 有什么区别？

| 命令 | 输出 | 控制 |
|------|------|------|
| `/intent-plan` | PLAN.md 文件 | 手动执行 |
| `/intent-build-now` | 自动执行 | Agent 驱动 |

想在执行前审查时用 `/intent-plan`。
信任过程时用 `/intent-build-now`。

### 如何知道 Intent 是否准备好了？

运行 `/intent-build-now`，它会告诉你：
- 缺少什么
- 如何修复
- 何时准备好

或者自己审查：
- [ ] 职责定义了？
- [ ] 有结构图？
- [ ] API 签名完整？
- [ ] 提供了示例？

### 如果实现偏离 Intent 怎么办？

1. **小偏离**：运行 `/intent-sync` 更新 Intent
2. **大偏离**：与团队讨论，可能需要修订 Intent
3. **根本不匹配**：停下来，重新评估，可能重新开始

---

## 最佳实践

### 如何写好 Intent？

1. **要具体** - "处理数据" → "验证邮箱格式"
2. **画图** - ASCII 艺术胜过千言万语
3. **定义边界** - 不做什么也很重要
4. **包含示例** - 每个示例成为一个测试
5. **考虑错误** - 什么可能出错？

### 如何审查 Intent？

关注：
1. **清晰度** - 其他人能理解吗？
2. **完整性** - 所有情况都覆盖了吗？
3. **简洁性** - 是否过度工程？
4. **可测试性** - 能验证吗？

### 何时更新 Intent vs. 创建新的？

**更新现有的**：
- Bug 修复
- 小增强
- 澄清

**创建新的**：
- 新功能
- 范围重大变化
- 不同模块

---

## 故障排除

### "Intent 验证失败"

你的 Intent 缺少必需元素。检查：
- 有职责章节吗？
- 有结构图吗？
- API 签名定义了吗？

运行 `/intent-build-now` 查看具体缺口。

### "测试失败"

如果实现后测试失败：
1. **不要修改测试** 来通过
2. **修复实现** 代替
3. 如果测试有问题，获得 test-master 的批准再修改

### "Agent 卡住了"

如果 Agent 没有进展：
1. 检查 Intent 清晰度
2. 提供更具体的上下文
3. 将任务分解为更小的部分
4. 尝试用更详细的提示运行

### "文档开销太大"

如果 Intent 感觉很重：
1. 从小开始 - 一次一个模块
2. 用 `/intent-interview` 引导你
3. 记住：Intent 替代其他文档，不是增加

---

## 理念

### 为什么说"Intent 是新的源代码"？

在 AI 原生开发中：
- 人类更擅长定义"什么"，AI 更擅长实现"如何"
- 代码频繁变化，Intent 更稳定
- Intent 在开发者离职后仍然存在
- AI 可以从 Intent 重新生成代码

### 人应该审查 Intent 还是代码？

**人审查 Intent** 因为：
- Intent 对非开发者可读
- 更少的行需要审查
- 更早发现问题
- 业务逻辑可见

**AI 审查代码** 因为：
- AI 不知疲倦且彻底
- 大规模模式匹配
- 一致性检查
- 测试验证正确性

### IDD 的未来是什么？

我们相信：
- Intent 将成为标准项目产物
- AI 将处理大部分实现
- 人类创造力专注于 Intent 设计
- 团队将以 Intent 质量来衡量

---

## 更多帮助

- [IDD 工作流程](workflow.md) - 完整指南
- [命令参考](commands/) - 所有命令
- [Agent 文档](agents/) - Agent 如何工作
- [Intent 标准](intent-standard.md) - 文件格式
- [方法论](methodology.md) - IDD 哲学
